<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Your Decisions</title>
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.0/dist/litera/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>
<body class="bg-light">
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="container">
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
<div class="container py-5">
    <h2>Decisions Created by You</h2>
    {% if decisions %}
        <ul class="list-group">
        {% for d in decisions %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ d.name }}
                <div>
                <a href="/share/{{ d.id }}" class="btn btn-sm btn-outline-primary">
                    <i class="fa-solid fa-link"></i> View Links
                </a>
                <button class="btn btn-sm btn-outline-danger" onclick="confirmDelete('{{ d.id }}')">
                    <i class="fa-solid fa-trash"></i> Delete
                </button>
                </div>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No decisions found for this creator ID.</p>
    {% endif %}
    <a href="/" class="btn btn-outline-secondary mt-3">Back to Home</a>
</div>
<script>
function confirmDelete(decisionId) {
    if (confirm("Are you sure you want to delete this poll? This cannot be undone.")) {
        fetch(`/delete/${decisionId}`, {
            method: "POST"
        }).then(() => {
            window.location.reload();
        });
    }
}
</script>

</body>
</html>
